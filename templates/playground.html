<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>GraphQL Playground</title>
    <link
      rel="stylesheet"
      href="//cdn.jsdelivr.net/npm/graphql-playground-react/build/static/css/index.css"
    />
    <script src="//cdn.jsdelivr.net/npm/graphql-playground-react/build/static/js/middleware.js"></script>
  </head>
  <body>
    <div id="root"></div>

    <script>
      // helper to read Django CSRF token from cookie
      function getCookie(name) {
        const v = document.cookie.match(
          "(^|;)\\s*" + name + "\\s*=\\s*([^;]+)"
        );
        return v ? v.pop() : "";
      }

      window.addEventListener("load", function () {
        const csrf = getCookie("csrftoken");

        GraphQLPlayground.init(document.getElementById("root"), {
          endpoint: "/graphql/", // change if your endpoint is different
          settings: {
            "request.credentials": "same-origin", // include cookies for auth if needed
          },
          // defaultHeaders will add the X-CSRFToken header to POST requests
          // so Django's CSRF middleware won't block the Playground POSTs.
          // If you use token-based auth, you can put Authorization header here.
          headers: {
            "X-CSRFToken": csrf,
          },
        });
      });
    </script>
  </body>
</html>
